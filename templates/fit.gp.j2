# specific to fitting
# range is specified in settings.gp.j2

# label font
lf_ = ',6'
xpos = .1
ypos = .9
dy = .1

{% if plot_measure == 'cdf' %}
xpos = .625
ypos = .9
{% endif %}

{% if datainfo.title == 'hobbit' and plot_measure == 'centralities' %}
ypos = .3
dx=.5
set label 1 "\\tiny {{ datainfo.title }}" at graph (xpos+dx),(ypos-0*dy)  font ',6'
{% else %}
dx=0
set label 1 "\\tiny {{ datainfo.title }}" at graph (xpos+dx),(ypos-0*dy)  font ',6'
{% endif %}

{% if datainfo.rvalue != 0.0 %} # avoid insert label where it is not applied
ypos = ypos - dy
{% if datainfo.rvalue < 0.01 and datainfo.rvalue != 0.0 %}
set label 2 gprintf("\\tiny r=%.2e", {{ datainfo.rvalue }}) at graph (xpos+dx),(ypos)
{% else %}
set label 2 gprintf("\\tiny r=%1.2f", {{ datainfo.rvalue }}) at graph (xpos+dx),(ypos)
{% endif %}
{% endif %}

{% if plot_measure == 'centralities' %}
ypos = ypos - dy
{% if datainfo.pvalue < 0.01 and datainfo.pvalue != 0.0 %}
set label 3 gprintf("\\tiny p=%.2e", {{ datainfo.pvalue }}) at graph (xpos+dx),(ypos)
{% else %}
set label 3 gprintf("\\tiny p=%1.2f", {{ datainfo.pvalue }}) at graph (xpos+dx),(ypos)
{% endif %}
{% endif %}

{% if plot_measure == 'cdf' %}
ypos = ypos - dy
set label 3 gprintf("\\tiny $\\alpha=%1.2f$", {{ datainfo.alpha }}) at graph (xpos+dx),(ypos)
xmin = {{ datainfo.xmin }}
f(x) = x**-{{ datainfo.alpha }}
{% else %} # centralities
f(x) = {{ datainfo.slope }}*x + {{ datainfo.intercept }}
{% endif %}

# ls 1 and ls 2 are set in settings.gp.j2
plot "{{ datainfo.filename }}" using 1:2 ls 1 notitle
{% if plot_measure == 'cdf' %}
set for [i=1:5] linetype i dt i
plot "{{ datainfo.filename }}" using 3:4 w l lt 2 lc rgb 'black' lw 2 notitle
{% else %}
plot f(x) ls 2 notitle
{% endif %}
